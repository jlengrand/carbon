{
  "type": "build",
  "state": "done",
  "image_reference": "julienlengrand/carbon.now.sh:latest",
  "system": {
    "type": "Linux",
    "release": "4.19.76-linuxkit",
    "os": "Alpine Linux 3.10.5"
  },
  "source_image": {
    "id": "sha256:806c4c68b73b6a33ba75786309e58ca8a869f1511331e39df666a2ed79131a9d",
    "name": "julienlengrand/carbon.now.sh:latest",
    "size": 307834080,
    "size_human": "308 MB",
    "create_time": "2020-05-27T14:26:55Z",
    "all_names": [
      "julienlengrand/carbon.now.sh:latest"
    ],
    "docker_version": "19.03.8",
    "architecture": "amd64",
    "user": "1001",
    "exposed_ports": [
      "3000/tcp"
    ]
  },
  "minified_image_size": 108314589,
  "minified_image_size_human": "108 MB",
  "minified_image": "julienlengrand/carbon.now.sh.slim",
  "minified_image_has_data": true,
  "minified_by": 2.8420370962216364,
  "artifact_location": "/tmp/docker-slim-state/.docker-slim-state/images/806c4c68b73b6a33ba75786309e58ca8a869f1511331e39df666a2ed79131a9d/artifacts",
  "container_report_name": "creport.json",
  "seccomp_profile_name": "julienlengrand-carbon.now.sh-seccomp.json",
  "apparmor_profile_name": "julienlengrand-carbon.now.sh-apparmor-profile",
  "image_stack": [
    {
      "is_top_image": false,
      "id": "sha256:14592bec10593cd9e957c0bdf2c8d93aa348a4a1a18f313a5b44926dabd1e70a",
      "full_name": "node:12-alpine3.10",
      "repo_name": "node",
      "version_tag": "12-alpine3.10",
      "raw_tags": [
        "node:12-alpine3.10"
      ],
      "create_time": "2020-05-26T22:44:53Z",
      "new_size": 89127508,
      "new_size_human": "89 MB",
      "instructions": [
        {
          "type": "ADD",
          "time": "2020-04-24T01:05:21Z",
          "is_nop": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 5577835,
          "size_human": "5.6 MB",
          "params": "file:66a440394c2442570f1f060e25c86613cb2d88a8af0c71c5a4154b3570e9a805 in /",
          "command_snippet": "ADD file:66a440394c2442570f1f060e25c86613cb2..."
        },
        {
          "type": "CMD",
          "time": "2020-04-24T01:05:21Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"/bin/sh\"]",
          "command_snippet": "CMD [\"/bin/sh\"]"
        },
        {
          "type": "ENV",
          "time": "2020-05-26T22:44:38Z",
          "is_nop": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 0,
          "params": "NODE_VERSION=12.17.0",
          "command_snippet": "ENV NODE_VERSION=12.17.0"
        },
        {
          "type": "RUN",
          "time": "2020-05-26T22:44:44Z",
          "is_nop": false,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 75928217,
          "size_human": "76 MB",
          "command_snippet": "RUN addgroup -g 1000 node && \\\n\tadduser -u 1...",
          "system_commands": [
            "addgroup -g 1000 node",
            "adduser -u 1000 -G node -s /bin/sh -D node",
            "apk add --no-cache         libstdc++",
            "apk add --no-cache --virtual .build-deps         curl",
            "ARCH=",
            "alpineArch=\"$(apk --print-arch)\"",
            "case \"${alpineArch##*-}\" in         x86_64)           ARCH='x64'           CHECKSUM=\"fbd8916cc5a3c85dc503cc1fe9606cf8860152c4e8b2f2fcc729e48db3e3d654\"           ;;         *) ;;       esac",
            "if [ -n \"${CHECKSUM}\" ]; then     set -eu;     curl -fsSLO --compressed \"https://unofficial-builds.nodejs.org/download/release/v$NODE_VERSION/node-v$NODE_VERSION-linux-$ARCH-musl.tar.xz\";     echo \"$CHECKSUM  node-v$NODE_VERSION-linux-$ARCH-musl.tar.xz\" | sha256sum -c -",
            "tar -xJf \"node-v$NODE_VERSION-linux-$ARCH-musl.tar.xz\" -C /usr/local --strip-components=1 --no-same-owner",
            "ln -s /usr/local/bin/node /usr/local/bin/nodejs;   else     echo \"Building from source\"",
            "apk add --no-cache --virtual .build-deps-full         binutils-gold         g++         gcc         gnupg         libgcc         linux-headers         make         python",
            "for key in       94AE36675C464D64BAFA68DD7434390BDBE9B9C5       FD3A5288F042B6850C66B31F09FE44734EB7990E       71DCFD284A79C3B38668286BC97EC7A07EDE3FC1       DD8F2338BAE7501E3DD5AC78C273792F7D83545D       C4F0DFFF4E8C1A8236409D08E73BC641CC11F4C8       B9AE9905FFD7803F25714661B63B535A4C206CA9       77984A986EBC2AA786BC0F66B01FBB92821C587A       8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600       4ED778F539E3634C779C87C6D7062848A1AB005C       A48C2BEE680E841632CD4E44F07496B3EB3C1762       B9E2F5981AA6E0CD28160D9FF13993A75599653C     ; do       gpg --batch --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys \"$key\" ||       gpg --batch --keyserver hkp://ipv4.pool.sks-keyservers.net --recv-keys \"$key\" ||       gpg --batch --keyserver hkp://pgp.mit.edu:80 --recv-keys \"$key\" ;     done",
            "curl -fsSLO --compressed \"https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION.tar.xz\"",
            "curl -fsSLO --compressed \"https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc\"",
            "gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc",
            "grep \" node-v$NODE_VERSION.tar.xz$\" SHASUMS256.txt | sha256sum -c -",
            "tar -xf \"node-v$NODE_VERSION.tar.xz\"",
            "cd \"node-v$NODE_VERSION\"",
            "./configure",
            "make -j$(getconf _NPROCESSORS_ONLN) V=",
            "make install",
            "apk del .build-deps-full",
            "cd ..",
            "rm -Rf \"node-v$NODE_VERSION\"",
            "rm \"node-v$NODE_VERSION.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt;   fi",
            "rm -f \"node-v$NODE_VERSION-linux-$ARCH-musl.tar.xz\"",
            "apk del .build-deps",
            "node --version",
            "npm --version"
          ]
        },
        {
          "type": "ENV",
          "time": "2020-05-26T22:44:44Z",
          "is_nop": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 0,
          "params": "YARN_VERSION=1.22.4",
          "command_snippet": "ENV YARN_VERSION=1.22.4"
        },
        {
          "type": "RUN",
          "time": "2020-05-26T22:44:53Z",
          "is_nop": false,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 7621340,
          "size_human": "7.6 MB",
          "command_snippet": "RUN apk add --no-cache --virtual .build-deps...",
          "system_commands": [
            "apk add --no-cache --virtual .build-deps-yarn curl gnupg tar",
            "for key in     6A010C5166006599AA17F08146C2130DFD2497F5   ; do     gpg --batch --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys \"$key\" ||     gpg --batch --keyserver hkp://ipv4.pool.sks-keyservers.net --recv-keys \"$key\" ||     gpg --batch --keyserver hkp://pgp.mit.edu:80 --recv-keys \"$key\" ;   done",
            "curl -fsSLO --compressed \"https://yarnpkg.com/downloads/$YARN_VERSION/yarn-v$YARN_VERSION.tar.gz\"",
            "curl -fsSLO --compressed \"https://yarnpkg.com/downloads/$YARN_VERSION/yarn-v$YARN_VERSION.tar.gz.asc\"",
            "gpg --batch --verify yarn-v$YARN_VERSION.tar.gz.asc yarn-v$YARN_VERSION.tar.gz",
            "mkdir -p /opt",
            "tar -xzf yarn-v$YARN_VERSION.tar.gz -C /opt/",
            "ln -s /opt/yarn-v$YARN_VERSION/bin/yarn /usr/local/bin/yarn",
            "ln -s /opt/yarn-v$YARN_VERSION/bin/yarnpkg /usr/local/bin/yarnpkg",
            "rm yarn-v$YARN_VERSION.tar.gz.asc yarn-v$YARN_VERSION.tar.gz",
            "apk del .build-deps-yarn",
            "yarn --version"
          ]
        },
        {
          "type": "COPY",
          "time": "2020-05-26T22:44:53Z",
          "is_nop": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 116,
          "size_human": "116 B",
          "params": "file:238737301d47304174e4d24f4def935b29b3069c03c72ae8de97d94624382fce in /usr/local/bin/",
          "command_snippet": "COPY file:238737301d47304174e4d24f4def935b29..."
        },
        {
          "type": "ENTRYPOINT",
          "time": "2020-05-26T22:44:53Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exits": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"docker-entrypoint.sh\"]",
          "command_snippet": "ENTRYPOINT [\"docker-entrypoint.sh\"]"
        },
        {
          "type": "CMD",
          "time": "2020-05-26T22:44:53Z",
          "is_last_instruction": true,
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exits": true,
          "layer_index": 0,
          "size": 0,
          "params": "[\"node\"]",
          "command_snippet": "CMD [\"node\"]",
          "raw_tags": [
            "node:12-alpine3.10"
          ]
        }
      ]
    },
    {
      "is_top_image": true,
      "id": "sha256:806c4c68b73b6a33ba75786309e58ca8a869f1511331e39df666a2ed79131a9d",
      "full_name": "julienlengrand/carbon.now.sh:latest",
      "repo_name": "julienlengrand/carbon.now.sh",
      "version_tag": "latest",
      "raw_tags": [
        "julienlengrand/carbon.now.sh:latest"
      ],
      "create_time": "2020-05-27T14:26:55Z",
      "new_size": 218706572,
      "new_size_human": "219 MB",
      "base_image_id": "sha256:14592bec10593cd9e957c0bdf2c8d93aa348a4a1a18f313a5b44926dabd1e70a",
      "instructions": [
        {
          "type": "WORKDIR",
          "time": "2020-05-27T14:26:34Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:9fd6573b5dfea49c441a2b366f3b8d40ec1f22265afd07e260045fa92f558bfd",
          "layer_index": 0,
          "size": 0,
          "params": "/app",
          "command_snippet": "WORKDIR /app",
          "system_commands": [
            "mkdir -p /app"
          ]
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:36Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:bee850abe1bc59a46c4d7eebb0b390d9ee9db271ca9cf4da4e68b36e8d7f98cb",
          "layer_index": 0,
          "size": 38927136,
          "size_human": "39 MB",
          "params": "dir:17847143a25abb8a9fae0ab52a5d86e9314c1140ff1b34659a4122542a35f825 in ./.next",
          "command_snippet": "COPY dir:17847143a25abb8a9fae0ab52a5d86e9314..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:36Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:ad3db8aac7b36f2b1691d3f4cbcc58f4f0541b40b9799203f994aa0704b48b69",
          "layer_index": 0,
          "size": 230235,
          "size_human": "230 kB",
          "params": "dir:ef0f409ac1de68a0cf766ad643bf62cfe3494b8653873428eb8b5bc36b75b99c in ./components",
          "command_snippet": "COPY dir:ef0f409ac1de68a0cf766ad643bf62cfe34..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:36Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:527823db62367f0ccc622517a84f701459a82506222f5458d74f5eb8a7a8cb4d",
          "layer_index": 0,
          "size": 65346,
          "size_human": "65 kB",
          "params": "dir:055afe6cf2cddd6995df6c8ca9da0506ec1da0437440e33dcbf627ead48e40d5 in ./lib",
          "command_snippet": "COPY dir:055afe6cf2cddd6995df6c8ca9da0506ec1..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:52Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:9c487ff3724f9ac38e409927dabf39dffdff1d51cbae989f9ffd1f1b97c3d727",
          "layer_index": 0,
          "size": 178835991,
          "size_human": "179 MB",
          "params": "dir:1c4d71ed85b50376a9ccfb9ea54f7315dcdfebe85adc9c6968910ffc63cfd90c in ./node_modules",
          "command_snippet": "COPY dir:1c4d71ed85b50376a9ccfb9ea54f7315dcd..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:53Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:0b3308fa212524cc903f238a378dbd35933341ff23fae8298d112ffccdf2a090",
          "layer_index": 0,
          "size": 23003,
          "size_human": "23 kB",
          "params": "dir:58249fbcdc642f05140558bcef09521f04a84f613bfb42c0b67e915bf36d0aab in ./pages",
          "command_snippet": "COPY dir:58249fbcdc642f05140558bcef09521f04a..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:ab48dfaf8024adc71dab78da8e779b523016d8e500c7d48ebdca953c298ac5a1",
          "layer_index": 0,
          "size": 619206,
          "size_human": "619 kB",
          "params": "dir:fa7e025c7be5569c4d50e224f9249813cdbf89919f824e60d2282591f35dc0f9 in ./public",
          "command_snippet": "COPY dir:fa7e025c7be5569c4d50e224f9249813cdb..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:525dd33829eb1db0cc62964dd66b3806f229c6a197db97afe180360aca32a9e4",
          "layer_index": 0,
          "size": 1024,
          "size_human": "1.0 kB",
          "params": "file:876d48b713ff83ec71db08be6f4703d20fbee5e1d1dee40b6bbb5e94fc8e0c9b in ./next.config.js",
          "command_snippet": "COPY file:876d48b713ff83ec71db08be6f4703d20f..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:e1e53e527d74c4776f67507f93835f1f671520cf6d0097332f73231e9c26a62c",
          "layer_index": 0,
          "size": 1063,
          "size_human": "1.1 kB",
          "params": "file:969c16a2cd7bc4d8f324e66ec01d0664060f1e7ae2fce6e0ddf37d07cce9df14 in ./LICENSE",
          "command_snippet": "COPY file:969c16a2cd7bc4d8f324e66ec01d066406..."
        },
        {
          "type": "COPY",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:0ec86f5b5b0b03f32ba81d03086645379d5a22519a1ffce884725c2eba4ad1dc",
          "layer_index": 0,
          "size": 3568,
          "size_human": "3.6 kB",
          "params": "file:26033dc26ed1f74a247e50be68c74a7e688e523e95d744c30d808503eb498877 in ./package.json",
          "command_snippet": "COPY file:26033dc26ed1f74a247e50be68c74a7e68..."
        },
        {
          "type": "EXPOSE",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:3b90d51490d8971db041cad9359fcdb2605cf122febc3e3b4ceb84c409aeb914",
          "layer_index": 0,
          "size": 0,
          "params": "3000",
          "command_snippet": "EXPOSE 3000"
        },
        {
          "type": "USER",
          "time": "2020-05-27T14:26:54Z",
          "is_nop": true,
          "local_image_exits": true,
          "intermediate_image_id": "sha256:b7491559de0bee2992c1c2306e131896e61a4101cc65990a4b78313e5be8b8db",
          "layer_index": 0,
          "size": 0,
          "params": "1001",
          "command_snippet": "USER 1001"
        },
        {
          "type": "CMD",
          "time": "2020-05-27T14:26:55Z",
          "is_last_instruction": true,
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exits": true,
          "layer_index": 0,
          "size": 0,
          "params": "[\"yarn\",\"start\"]",
          "command_snippet": "CMD [\"yarn\",\"start\"]",
          "raw_tags": [
            "julienlengrand/carbon.now.sh:latest"
          ]
        }
      ]
    }
  ]
}
